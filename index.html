<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Notion Feed Grid</title>
<style>
body { font-family:sans-serif; margin:0; padding:20px; background:#f9f9f9; }
.grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
.card { background:#fff; border:1px solid #ccc; border-radius:10px; overflow:hidden; text-align:center; padding:5px; }
.thumb { width:100%; display:block; border-radius:6px; }
@media (max-width:860px){ .grid{grid-template-columns:repeat(2,1fr);} }
@media (max-width:520px){ .grid{grid-template-columns:repeat(1,1fr);} }
</style>
</head>
<body>
<h1>Notion Feed</h1>
<main id="grid"></main>
<div id="empty" style="display:none; margin-top:20px;">Ingen opslag fundet.</div>

<script>
const FEED_ENDPOINT = "https://proud-frog-22e3.marieke-toet-m.workers.dev/"; // SKIFT TIL DIN WORKER

async function loadFeed() {
  const grid = document.getElementById('grid');
  const empty = document.getElementById('empty');
  grid.innerHTML = '';
  empty.style.display = 'none';

  try {
    const res = await fetch(FEED_ENDPOINT);
    if (!res.ok) throw new Error(`HTTP fejl: ${res.status}`);
    const data = await res.json();

    if (!data.results || data.results.length === 0) {
      empty.style.display = 'block';
      return;
    }

    data.results.forEach(item => {
      const date = item.properties?.Dato?.date?.start || "";
      const platform = item.properties?.Platform?.select?.name || "Ukendt";
      const thumb = item.properties?.Billede?.files?.[0]?.file?.url || "https://via.placeholder.com/150";

      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<img src="${thumb}" class="thumb"><p>${platform}</p><p>${date}</p>`;
      grid.appendChild(card);
    });

  } catch(err) {
    console.error("Fejl ved hentning af feed:", err);
    empty.textContent = "Kunne ikke hente data.";
    empty.style.display = 'block';
  }
}

loadFeed();
</script>
</body>
</html>

